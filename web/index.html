<!DOCTYPE html>
<html>
<head>
	<title>LOOM Vector Tiles</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />	
	<script type="text/javascript"  src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
	<script type="text/javascript"  src="https://unpkg.com/leaflet.vectorgrid@1.2.0"></script>
</head>
<body style='margin:0'>
	<div id="map" style="width: 100vw; height: 100vh;"></div>

	<script>
		const loomStyles = {
	        lines: function(properties, zoom) {
	        	//console.log(properties);
	            return {
	            	lineCap: properties.lineCap,
	            	weight: properties.width,
		            color: '#' + properties.color,
		            opacity: 1,
		            fill: false
		        }
	        },
	        "inner-connections": function(properties, zoom) {
	        	//console.log(properties);
	            return {
	            	lineCap: properties.lineCap,
	            	weight: properties.width,
		            color: '#' + properties.color,
		            opacity: 1,
		            fill: false
		        }
	        },
	         "stations": function(properties, zoom) {
	        	//console.log(properties);
	            return {
	            	lineCap: properties.lineCap,
	            	weight: properties.width,
		            color: '#' + properties.color,
		            opacity: 1,
		            fillColor: '#' + properties.fillColor,
		            fillOpacity: 1,
		            fill: true
		        }
	        },
		};

		const map = L.map('map');
		var layerControl = L.control.layers([], [], {collapsed:true, position: 'topright'}).addTo(map);
		map.setView({ lat: 47.37393285194738, lng: 8.536390713506405}, 14);

		L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
		    attribution: '&copy; <a rel="noreferrer" target="_blank" href="#">OpenStreetMap</a>',
		    maxZoom: 19,
		    opacity:0.9
		}).addTo(map);

		const loomTileOptions = {
			rendererFactory: L.canvas.tile,
			vectorTileLayerStyles: loomStyles,
			interactive: true
		};

		const subwayLightrailGeo = L.vectorGrid.protobuf("/tiles/subway-lightrail/geo/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(subwayLightrailGeo, "Subway (geo)");

		const subwayLightrailOctiGeo = L.vectorGrid.protobuf("/tiles/subway-lightrail//octi-geo/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(subwayLightrailOctiGeo, "Subway (octi-geo)");

		const subwayLightrailOcti = L.vectorGrid.protobuf("/tiles/subway-lightrail//octi/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(subwayLightrailOcti, "Subway (octi)");

		const subwayLightrailOrthorad = L.vectorGrid.protobuf("/tiles/subway-lightrail/orthorad/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(subwayLightrailOrthorad, "Subway (orthorad)");

		const tramGeo = L.vectorGrid.protobuf("/tiles/tram/geo/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(tramGeo, "Tram (geo)");

		const tramOctiGeo = L.vectorGrid.protobuf("/tiles/tram/octi-geo/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(tramOctiGeo, "Tram (octi-geo)");

		const tramOcti = L.vectorGrid.protobuf("/tiles/tram/octi/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(tramOcti, "Tram (octi)");

		const tramOrthorad = L.vectorGrid.protobuf("/tiles/tram/orthorad/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(tramOrthorad, "Tram (orthorad)");

		const railGeo = L.vectorGrid.protobuf("/tiles/rail/geo/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(railGeo, "Rail (geo)");

		const railOctiGeo = L.vectorGrid.protobuf("/tiles/rail/octi-geo/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(railOctiGeo, "Rail (octi-geo)");

		const railOcti = L.vectorGrid.protobuf("/tiles/rail/octi/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(railOcti, "Rail (octi)");

		const railOrthorad = L.vectorGrid.protobuf("/tiles/rail/orthorad/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(railOrthorad, "Rail (orthorad)");

		const railcommuterGeo = L.vectorGrid.protobuf("/tiles/rail-commuter/geo/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(railcommuterGeo, "rail-commuter (geo)");

		const railcommuterOctiGeo = L.vectorGrid.protobuf("/tiles/rail-commuter/octi-geo/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(railcommuterOctiGeo, "rail-commuter (octi-geo)");

		const railcommuterOcti = L.vectorGrid.protobuf("/tiles/rail-commuter/octi/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(railcommuterOcti, "rail-commuter (octi)");

		const railcommuterOrthorad = L.vectorGrid.protobuf("/tiles/rail-commuter/orthorad/{z}/{x}/{y}.mvt", loomTileOptions);
		layerControl.addOverlay(railcommuterOrthorad, "rail-commuter (orthorad)");
	</script>
</body>
</html>
